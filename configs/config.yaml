system:
  cron_start: 2
  cron_end: 8
  max_workers: 3  # Ryzen 3500X 建议设为 3
  scan_interval: 10  # 扫描间隔（分钟）
  scheduler_interval: 10  # 调度器检查间隔（秒）
  task_queue_size: 10  # 任务队列容量
  min_disk_space_gb: 5  # 最小磁盘空间要求（GB）

path:
  # 输入输出目录配对（可在Web界面管理）
  pairs:
    - input: "/mnt/pve/media/downloads"
      output: "/mnt/pve/media/archive"
  trash: ".stm_trash"  # 相对路径，在各输入目录下的 .stm_trash
  database: "/data/tasks.db"

ffmpeg:
  codec: "libx264"
  preset: "veryslow"
  crf: 28
  audio: "aac"
  audio_bitrate: "128k"
  output_extension: ".mp4"  # 统一输出容器，提升兼容性
  verify_decode_seconds: 2  # 输出校验解码时长（秒）
  verify_tail_seek_seconds: 10  # 从末尾回退秒数，抽样校验尾部（0为关闭）
  extensions: [".mp4", ".mkv", ".avi", ".ts", ".mov", ".flv", ".wmv", ".m4v", ".webm"]
  strict_check: true  # 转码前严格检查文件完整性，跳过损坏文件
  probe_timeout_seconds: 30
  progress_stall_minutes: 10
  max_duration_hours: 2
  duration_factor: 2.0
  duration_extra_minutes: 15
  # 排除规则（支持通配符）
  exclude_patterns:
    - "SYNOPHOTO_*"           # 群晖缩略图/视频
    - "@eaDir/*"               # 群晖索引目录
    - "#recycle/*"             # 群晖回收站
    - ".*"                     # 隐藏文件
    - "*.tmp"                  # 临时文件
    - "*.part"                 # 未完成的下载

cleaning:
  soft_delete_days: 7   # 移入垃圾桶天数
  hard_delete_days: 30  # 彻底删除天数

log:
  level: "info"  # debug, info, warn, error
  file: "/data/stm.log"
